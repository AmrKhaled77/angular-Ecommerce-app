<div class="w-11/12 my-10 mx-auto bg-white border border-gray-200 rounded-3xl shadow-xl overflow-hidden">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-10">

    <!-- Product Slider & Stats -->
    <div class="p-8">
      <!-- Main Slider -->
      <swiper-container
        class="mainSlider w-full h-[22rem] rounded-2xl mb-6 shadow-md"
        space-between="10"
        navigation="true"
        pagination='{"clickable": true}'
        loop="true"
      >
        @for (img of productData()?.images; track $index) {
          <swiper-slide>
            <img
              class="w-full h-full object-contain hover:scale-105 transition-transform duration-300"
              [src]="img"
              alt="main"
            />
          </swiper-slide>
        }
      </swiper-container>

      <!-- Quick Stats -->
      <div class="grid grid-cols-2 sm:grid-cols-4 gap-5">
        <div
          class="p-5 bg-gray-50 border border-gray-200 rounded-2xl flex flex-col items-center shadow-sm hover:shadow-md transition"
        >
          <i class="fa-solid fa-box text-blue-500 text-lg mb-1"></i>
          <span class="text-xs text-gray-500">Stock</span>
          <span class="font-semibold text-gray-800 text-sm">
            {{ productData()?.quantity }} units
          </span>
        </div>
        <div
          class="p-5 bg-gray-50 border border-gray-200 rounded-2xl flex flex-col items-center shadow-sm hover:shadow-md transition"
        >
          <i class="fa-solid fa-chart-line text-green-500 text-lg mb-1"></i>
          <span class="text-xs text-gray-500">Sold</span>
          <span class="font-semibold text-gray-800 text-sm">
            {{ productData()?.sold }}
          </span>
        </div>
        <div
          class="p-5 bg-gray-50 border border-gray-200 rounded-2xl flex flex-col items-center shadow-sm hover:shadow-md transition"
        >
          <i class="fa-solid fa-tags text-purple-500 text-lg mb-1"></i>
          <span class="text-xs text-gray-500">Category</span>
          <span class="font-semibold text-gray-800 text-sm">
            {{ productData()?.category?.name }}
          </span>
        </div>
        <div
          class="p-5 bg-gray-50 border border-gray-200 rounded-2xl flex flex-col items-center shadow-sm hover:shadow-md transition"
        >
          <i class="fa-solid fa-building text-orange-500 text-lg mb-1"></i>
          <span class="text-xs text-gray-500">Brand</span>
          <span class="font-semibold text-gray-800 text-sm">
            {{ productData()?.brand?.name }}
          </span>
        </div>
      </div>
    </div>

    <!-- Product Info -->
    <div class="p-8 flex flex-col justify-between">
      <div>
        <!-- Title -->
        <h1 class="text-3xl font-bold text-gray-900 leading-tight">
          {{ productData()?.title }}
        </h1>
        <h2 class="text-lg text-gray-500 mt-1">
          {{ productData()?.category?.name }}
        </h2>

        <!-- Rating -->
        <div class="flex items-center mt-4">
          <div class="flex space-x-1 text-yellow-400">
            @for (star of [1,2,3,4,5]; track $index) {
              <svg
                class="w-5 h-5"
                fill="currentColor"
                viewBox="0 0 22 20"
              >
                <path
                  d="M20.924 7.625a1.523 1.523 0 
                     0 0-1.238-1.044l-5.051-.734-2.259-4.577a1.534
                     1.534 0 0 0-2.752 0L7.365 5.847l-5.051.734A1.535 
                     1.535 0 0 0 1.463 9.2l3.656 3.563-.863 5.031a1.532 
                     1.532 0 0 0 2.226 1.616L11 17.033l4.518 2.375a1.534 
                     1.534 0 0 0 2.226-1.617l-.863-5.03L20.537 
                     9.2a1.523 1.523 0 0 0 .387-1.575Z"
                />
              </svg>
            }
          </div>
          <span class="ml-2 text-gray-500 text-sm">
            {{ productData()?.ratingsAverage }} / 5
            ({{ productData()?.ratingsQuantity }} reviews)
          </span>
        </div>

        <!-- Stock & Sold -->
        <div class="mt-6 flex items-center gap-6 text-gray-700 text-sm">
          <div class="flex items-center gap-2">
            <i class="fa-regular fa-sun text-gray-500"></i>
            <span>Stock: <b>{{ productData()?.quantity }} units</b></span>
          </div>
          <div class="flex items-center gap-2">
            <i class="fa-solid fa-chart-line text-gray-500"></i>
            <span>Sold: <b>{{ productData()?.sold }}</b></span>
          </div>
        </div>

        <!-- Category & Brand -->
        <div class="mt-4 flex flex-wrap gap-3 text-sm">
          <span class="font-semibold">Category:</span>
          <span
            class="bg-blue-100 text-blue-700 px-3 py-1 rounded-full"
          >
            {{ productData()?.category?.name }}
          </span>
          <span class="font-semibold ml-4">Brand:</span>
          <span class="text-gray-700 font-semibold">
            {{ productData()?.brand?.name }}
          </span>
        </div>

        <!-- Description -->
        <p class="mt-6 text-gray-700 leading-relaxed text-sm">
          {{ productData()?.description }}
        </p>
      
      </div>
        

      <!-- Price & Actions -->
      <div class="mt-8 flex items-center justify-between">
       

       @if (productData()?.priceAfterDiscount) {
  <div class="flex items-center gap-3">

    <span class="text-3xl font-bold text-green-600">
      {{ productData()?.priceAfterDiscount | currency }} EGP
    </span>
 
    <span class="text-lg font-semibold text-gray-400 line-through">
      {{ productData()?.price | currency }} EGP
    </span>
  </div>
}
@else {
  <span class="text-3xl font-bold text-green-600">
    {{ productData()?.price | currency }} EGP
  </span>
}

        <div class="flex gap-3">
          @if (isAddLoading()) {
            <!-- Loading State -->
            <button
              disabled
              class="flex items-center justify-center gap-2 bg-green-500 text-white font-semibold py-3 px-6 rounded-xl shadow-lg cursor-not-allowed opacity-90 animate-pulse"
            >
              <svg
                class="w-5 h-5 animate-spin text-white"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
                ></path>
              </svg>
              Adding...
            </button>
          } @else {
            <button
              (click)="onAddToCartClick()"
              class="bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg transition active:scale-95 flex items-center justify-center gap-2 cursor-pointer"
            >
              ðŸ›’ Add to Cart
            </button>
          }

          <!-- Wishlist Button -->
         
        </div>
      </div>
    </div>
  </div>
</div>


<!-- Related Products -->
<h2
  class="text-3xl font-bold mb-10 text-gray-900 text-center flex items-center justify-center gap-2"
>
  <i class="fa-solid fa-star text-yellow-500"></i>
  also you may like
</h2>

<div
  class="grid gap-8 px-4 sm:px-8 md:px-12 lg:px-16 py-8 
              grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5"
>
  @if (YouMayLieProducts()!.length > 0) {
    @for (item of YouMayLieProducts(); track $index) {
      <app-product-item
        [cardItem]="item"
        [style.animation-delay]="`calc(0.05s * ${$index})`"
        class="animate-fade-in-up hover:scale-105 transition-transform duration-300"
      >
      </app-product-item>
    }
  } @else if (YouMayLieProducts() === null) {
    @for (_ of [1,2,3,4,5,6,7,8,9,10]; track $index) {
      <div
        class="relative bg-white border border-gray-200 rounded-2xl shadow-md overflow-hidden p-6 animate-pulse"
      >
        <!-- Product Image Skeleton -->
        <div class="h-56 w-full bg-gray-200 rounded-lg mb-4"></div>

        <!-- Content -->
        <div class="space-y-3">
          <div class="h-3 w-20 bg-gray-200 rounded"></div>
          <div class="h-4 w-32 bg-gray-200 rounded"></div>

          <div class="flex items-center justify-between mt-6">
            <div class="h-5 w-24 bg-gray-200 rounded"></div>
            <div class="flex items-center space-x-2">
              <div class="h-5 w-5 bg-gray-200 rounded-full"></div>
              <div class="h-3 w-8 bg-gray-200 rounded"></div>
            </div>
          </div>
        </div>
      </div>
    }
  }
</div>
